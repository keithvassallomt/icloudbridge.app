(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&e(n)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();const r={nodeCount:30,nodeRadius:2,nodeGlowRadius:8,clusterSpread:150,clusterDepth:80,arcCount:16,arcCurveStrength:.3,arcOpacity:.15,arcWidth:1.5,pulseSpeed:.003,pulseRadius:3,pulseGlowRadius:12,pulseSpacing:.25,pulsesPerArc:2,parallaxStrength:.1,hoverSpeedMultiplier:2.5,jitterAmount:.5,jitterSpeed:.02,channels:{dark:[{name:"Notes",color:"#FFD60A",glow:"#FFD60A88"},{name:"Reminders",color:"#00C7BE",glow:"#00C7BE88"},{name:"Photos",color:"#BF5AF2",glow:"#BF5AF288"},{name:"Passwords",color:"#8B6FFF",glow:"#8B6FFF88"}],light:[{name:"Notes",color:"#D4A800",glow:"#D4A80066"},{name:"Reminders",color:"#0099CC",glow:"#0099CC66"},{name:"Photos",color:"#9333EA",glow:"#9333EA66"},{name:"Passwords",color:"#7C3AED",glow:"#7C3AED66"}]},backgroundGradient:{dark:[{stop:0,color:"#05170A"},{stop:.5,color:"#0D2415"},{stop:1,color:"#1F3123"}],light:[{stop:0,color:"#EBF5EF"},{stop:.5,color:"#D9EDE1"},{stop:1,color:"#E3F2E9"}]},nodeColors:{dark:{core:"rgba(255, 255, 255, 0.8)",glow:"rgba(255, 255, 255, 0.3)"},light:{core:"rgba(100, 100, 120, 0.6)",glow:"rgba(100, 100, 120, 0.2)"}}};class y{constructor(t){this.canvas=t,this.ctx=t.getContext("2d"),this.width=0,this.height=0,this.leftCluster=[],this.rightCluster=[],this.arcs=[],this.pulses=[],this.mouse={x:0,y:0,normalizedX:0,normalizedY:0},this.isHoveringButton=!1,this.currentTheme=this.getTheme(),this.animationFrame=null,this.time=0,this.init()}getTheme(){return document.documentElement.getAttribute("data-theme")||"dark"}init(){this.resize(),this.createClusters(),this.createArcs(),this.createPulses(),this.setupEventListeners(),this.animate()}resize(){const t=window.devicePixelRatio||1,s=this.canvas.getBoundingClientRect();this.width=s.width,this.height=s.height,this.canvas.width=this.width*t,this.canvas.height=this.height*t,this.ctx.scale(t,t),this.leftCluster.length>0&&(this.createClusters(),this.createArcs())}createClusters(){this.leftCluster=[],this.rightCluster=[];const t=this.height/2;for(let s=0;s<r.nodeCount;s++)this.leftCluster.push({x:r.clusterDepth*Math.random(),y:t+(Math.random()-.5)*r.clusterSpread,baseX:r.clusterDepth*Math.random(),baseY:t+(Math.random()-.5)*r.clusterSpread,jitterOffset:Math.random()*Math.PI*2});for(let s=0;s<r.nodeCount;s++)this.rightCluster.push({x:this.width-r.clusterDepth*Math.random(),y:t+(Math.random()-.5)*r.clusterSpread,baseX:this.width-r.clusterDepth*Math.random(),baseY:t+(Math.random()-.5)*r.clusterSpread,jitterOffset:Math.random()*Math.PI*2})}createArcs(){this.arcs=[];for(let t=0;t<r.arcCount;t++){const s=this.leftCluster[Math.floor(Math.random()*this.leftCluster.length)],e=this.rightCluster[Math.floor(Math.random()*this.rightCluster.length)],i=r.channels[this.currentTheme],o=i[t%i.length],n=this.width/2,c=(Math.random()-.5)*this.height*r.arcCurveStrength;this.arcs.push({startNode:s,endNode:e,channel:o,controlPoint1:{x:n-this.width*.1,y:s.baseY+c},controlPoint2:{x:n+this.width*.1,y:e.baseY+c}})}}createPulses(){this.pulses=[],this.arcs.forEach((t,s)=>{for(let e=0;e<r.pulsesPerArc;e++){const i=e%2===0?1:-1;this.pulses.push({arc:t,progress:e*r.pulseSpacing,speed:r.pulseSpeed*(.8+Math.random()*.4),direction:i})}})}setupEventListeners(){window.addEventListener("mousemove",e=>{this.mouse.x=e.clientX,this.mouse.y=e.clientY,this.mouse.normalizedX=e.clientX/this.width*2-1,this.mouse.normalizedY=e.clientY/this.height*2-1});const t=document.querySelector(".btn-primary");t&&(t.addEventListener("mouseenter",()=>{this.isHoveringButton=!0}),t.addEventListener("mouseleave",()=>{this.isHoveringButton=!1})),window.addEventListener("resize",()=>this.resize()),new MutationObserver(()=>{const e=this.getTheme();e!==this.currentTheme&&(this.currentTheme=e,this.createArcs())}).observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]})}drawGradientBackground(){const t=this.ctx.createLinearGradient(0,0,this.width,this.height);r.backgroundGradient[this.currentTheme].forEach(e=>{t.addColorStop(e.stop,e.color)}),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height)}drawNode(t,s=1){const e=this.mouse.normalizedX*r.parallaxStrength*s,i=this.mouse.normalizedY*r.parallaxStrength*s,o=t.x+e,n=t.y+i,c=r.nodeColors[this.currentTheme],l=this.ctx.createRadialGradient(o,n,0,o,n,r.nodeGlowRadius);l.addColorStop(0,c.glow),l.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.fillStyle=l,this.ctx.beginPath(),this.ctx.arc(o,n,r.nodeGlowRadius,0,Math.PI*2),this.ctx.fill(),this.ctx.fillStyle=c.core,this.ctx.beginPath(),this.ctx.arc(o,n,r.nodeRadius,0,Math.PI*2),this.ctx.fill()}drawArc(t,s=1){const e=this.mouse.normalizedX*r.parallaxStrength*s,i=this.mouse.normalizedY*r.parallaxStrength*s,o=t.startNode.x+e,n=t.startNode.y+i,c=t.endNode.x+e,l=t.endNode.y+i,d=t.controlPoint1.x+e,h=t.controlPoint1.y+i,u=t.controlPoint2.x+e,x=t.controlPoint2.y+i;this.ctx.strokeStyle=t.channel.glow,this.ctx.lineWidth=r.arcWidth+2,this.ctx.globalAlpha=r.arcOpacity,this.ctx.beginPath(),this.ctx.moveTo(o,n),this.ctx.bezierCurveTo(d,h,u,x,c,l),this.ctx.stroke(),this.ctx.globalAlpha=1}getPointOnBezier(t,s,e,i,o){const n=1-t,c=n*n,l=c*n,d=t*t,h=d*t;return{x:l*s.x+3*c*t*e.x+3*n*d*i.x+h*o.x,y:l*s.y+3*c*t*e.y+3*n*d*i.y+h*o.y}}drawPulse(t,s=1){const e=t.arc,i=this.mouse.normalizedX*r.parallaxStrength*s,o=this.mouse.normalizedY*r.parallaxStrength*s,n={x:e.startNode.x+i,y:e.startNode.y+o},c={x:e.endNode.x+i,y:e.endNode.y+o},l={x:e.controlPoint1.x+i,y:e.controlPoint1.y+o},d={x:e.controlPoint2.x+i,y:e.controlPoint2.y+o},h=this.getPointOnBezier(t.progress,n,l,d,c),u=this.ctx.createRadialGradient(h.x,h.y,0,h.x,h.y,r.pulseGlowRadius);u.addColorStop(0,e.channel.glow),u.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.fillStyle=u,this.ctx.beginPath(),this.ctx.arc(h.x,h.y,r.pulseGlowRadius,0,Math.PI*2),this.ctx.fill(),this.ctx.fillStyle=e.channel.color,this.ctx.beginPath(),this.ctx.arc(h.x,h.y,r.pulseRadius,0,Math.PI*2),this.ctx.fill()}updateNodes(){const t=Math.sin(this.time*r.jitterSpeed)*r.jitterAmount,s=Math.cos(this.time*r.jitterSpeed*1.3)*r.jitterAmount;[...this.leftCluster,...this.rightCluster].forEach(e=>{const i=Math.sin(this.time*r.jitterSpeed+e.jitterOffset);e.x=e.baseX+i*t,e.y=e.baseY+i*s})}updatePulses(){const t=this.isHoveringButton?r.hoverSpeedMultiplier:1;this.pulses.forEach(s=>{s.progress+=s.speed*t*s.direction,s.direction===1&&s.progress>=1?s.progress=0:s.direction===-1&&s.progress<=0&&(s.progress=1)})}render(){this.drawGradientBackground(),this.arcs.forEach(t=>this.drawArc(t,50)),this.leftCluster.forEach(t=>this.drawNode(t,30)),this.rightCluster.forEach(t=>this.drawNode(t,30)),this.pulses.forEach(t=>this.drawPulse(t,50))}animate(){this.time++,this.updateNodes(),this.updatePulses(),this.render(),this.animationFrame=requestAnimationFrame(()=>this.animate())}destroy(){this.animationFrame&&cancelAnimationFrame(this.animationFrame)}}function w(){const a=document.getElementById("hero-canvas");return a?new y(a):(console.warn("Hero canvas not found"),null)}const p="icloudbridge-theme-preference";function C(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function m(){return localStorage.getItem(p)||"system"}function g(a){localStorage.setItem(p,a),document.documentElement.setAttribute("data-theme-preference",a);let t;a==="system"?t=C():t=a,document.documentElement.setAttribute("data-theme",t)}function P(){const a=m();let t;a==="system"?t="light":a==="light"?t="dark":t="system",g(t)}function f(){const a=m();g(a);const t=document.getElementById("theme-toggle");t&&t.addEventListener("click",P),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{m()==="system"&&g("system")}),typeof lucide<"u"&&lucide.createIcons()}function S(){const a=new Date().getFullYear(),t=document.getElementById("copyright-year");t&&(a>2025?t.textContent=`2025 - ${a}`:t.textContent="2025")}document.addEventListener("DOMContentLoaded",()=>{f(),S(),w(),typeof lucide<"u"&&lucide.createIcons()});f();
